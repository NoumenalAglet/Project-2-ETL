CREATE TABLE "states" (
  "State_or_Territory" varchar NOT NULL,
  "state_code" varchar PRIMARY KEY,
  "Capital" varchar,
  "Population_Dec_2021" integer,
  "Area_km2" integer
);

CREATE TABLE "city" (
  "city" varchar PRIMARY KEY,
  "lat" varchar NOT NULL,
  "lng" varchar NOT NULL,
  "state_code" varchar NOT NULL,
  "population" integer
);

CREATE TABLE "airports" (
  "id" int PRIMARY KEY,
  "ident" varchar NOT NULL,
  "type" varchar NOT NULL,
  "name" varchar NOT NULL,
  "latitude" varchar NOT NULL,
  "longitude" varchar NOT NULL,
  "region" varchar NOT NULL,
  "municipality" varchar,
  "gps_code" varchar,
  "iata_code" varchar
);

CREATE TABLE "airport_traffic" (
  "Airport_Code_0" varchar NOT NULL,
  "Airport_Code_1" varchar NOT NULL,
  "Year" int NOT NULL,
  "Month" int NOT NULL,
  "Revenue_Passenger" int,
  "Aircraft_Trips" int,
  "Rev_Pax_LF_Perc" float,
  "Distance_klm" int,
  "RPKs" int,
  "ASKs" int,
  "Seats" int,
  "Annual_Revenue_Passenger" int,
  "Annual_Aircraft_Trips" int,
  "Annual_Rev_Pax_LF_Perc" int,
  "Annual_RPKs" int,
  "Annual_ASKs" int,
  "Annual_Seats" int,
  "City_Pair_Route" varchar
);

CREATE TABLE "fligts" (
  "flight_Date" varchar NOT NULL,
  "departure_iata" varchar NOT NULL,
  "dept_terminal" varchar,
  "dept_gate" varchar,
  "delay" double,
  "arr_iata" varchar NOT NULL,
  "arr_terminal" varchar,
  "arr_gate" varchar,
  "arr_baggage" varchar,
  "airline" varchar,
  "airline_iata" varchar,
  "flight_iata" varchar
);

ALTER TABLE "airports" ADD FOREIGN KEY ("iata_code") REFERENCES "airport_traffic" ("Airport_Code_0");

ALTER TABLE "airports" ADD FOREIGN KEY ("iata_code") REFERENCES "airport_traffic" ("Airport_Code_1");

ALTER TABLE "states" ADD FOREIGN KEY ("state_code") REFERENCES "city" ("state_code");

ALTER TABLE "states" ADD FOREIGN KEY ("state_code") REFERENCES "airports" ("region");

ALTER TABLE "airports" ADD FOREIGN KEY ("iata_code") REFERENCES "fligts" ("departure_iata");

ALTER TABLE "airports" ADD FOREIGN KEY ("iata_code") REFERENCES "fligts" ("arr_iata");
